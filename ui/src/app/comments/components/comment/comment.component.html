<div *ngFor="let comment of extComments" class="comments-container">
	<mat-card class="comment-card" *ngIf="_showResolved || !comment.resolved" [class.comment-resolved]="comment.resolved">
		<mat-card-header>
			<div mat-card-avatar class="comment-header-image"></div>
			<mat-card-title>Author: {{comment.createdBy}}</mat-card-title>
			<mat-card-subtitle>{{comment.createdOn | date: 'medium' }}</mat-card-subtitle>
			<mat-card-subtitle>{{comment._id}}</mat-card-subtitle>
		</mat-card-header>

		<mat-card-content>
			{{comment.text}}
		</mat-card-content>

		<mat-card-actions *ngIf="!comment.resolved">
			<button mat-raised-button class="reply-button"
				(click)="replyTo(comment._id)">
				<mat-icon>reply</mat-icon>Reply
			</button>
			<button mat-raised-button class="resolve-button"
				(click)="resolve(comment._id)">
				<mat-icon>done</mat-icon>Resolve
			</button>
		</mat-card-actions>
	</mat-card>
	<mat-card class="reply-card" *ngIf="comment.replyTo">
    <mat-card-content>
      <mat-form-field class="reply-form-field">
        <textarea matInput placeholder="Comment" [(ngModel)]="commentText"></textarea>
      </mat-form-field>
     </mat-card-content>
	  <mat-card-actions>
	    <button mat-raised-button class="action-button" (click)="submitComment(comment._id, comment.parentId)">
	      <mat-icon>send</mat-icon>
	      Send
	    </button>
	    <button mat-raised-button class="action-button" color="warn" (click)="closeReply(comment._id)">
	      <mat-icon>cancel</mat-icon>
	      Cancel
	    </button>
	  </mat-card-actions>
  </mat-card>
	<med-comment *ngIf="comment.children"
  	[comments]="comment.children"
  	[tree]="false"
  	[showResolved]="_showResolved"
  	(resolveComment)="resolve($event)"
		(replyComment)="submitChildComment($event)">
  </med-comment>
</div>
